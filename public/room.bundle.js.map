{"version":3,"file":"room.bundle.js","sources":["../../rbd/pnpm-volume/f0aaf366-c569-4708-b7a1-64446516ac4f/node_modules/.registry.npmjs.org/preact/10.3.3/node_modules/preact/dist/preact.module.js","../../rbd/pnpm-volume/f0aaf366-c569-4708-b7a1-64446516ac4f/node_modules/.registry.npmjs.org/htm/3.0.3/node_modules/htm/dist/htm.module.js","../../rbd/pnpm-volume/f0aaf366-c569-4708-b7a1-64446516ac4f/node_modules/.registry.npmjs.org/htm/3.0.3/node_modules/htm/preact/index.module.js","../src/If.js","../src/reactions.js","../src/App.js","../src/room.js","../src/websocket.js"],"sourcesContent":["var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,l,u){var i,t=arguments,o={};for(i in l)\"key\"!==i&&\"ref\"!==i&&(o[i]=l[i]);if(arguments.length>3)for(u=[u],i=3;i<arguments.length;i++)u.push(t[i]);if(null!=u&&(o.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===o[i]&&(o[i]=n.defaultProps[i]);return h(n,o,l&&l.key,l&&l.ref)}function h(l,u,i,t){var o={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return n.vnode&&n.vnode(o),o}function p(){return{}}function d(n){return n.children}function y(n,l){this.props=n,this.context=l}function m(n,l){if(null==l)return n.__?m(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?m(n):null}function w(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return w(n)}}function g(l){(!l.__d&&(l.__d=!0)&&1===u.push(l)||t!==n.debounceRendering)&&((t=n.debounceRendering)||i)(k)}function k(){var n,l,i,t,o,r,f;for(u.sort(function(n,l){return l.__v.__b-n.__v.__b});n=u.pop();)n.__d&&(i=void 0,t=void 0,r=(o=(l=n).__v).__e,(f=l.__P)&&(i=[],t=z(f,o,s({},o),l.__n,void 0!==f.ownerSVGElement,null,i,null==r?m(o):r),A(i,o),t!=r&&w(o)))}function _(n,l,u,i,t,o,r,c,s){var v,h,p,d,y,w,g,k=u&&u.__k||e,_=k.length;if(c==f&&(c=null!=o?o[0]:_?m(u,0):null),v=0,l.__k=b(l.__k,function(u){if(null!=u){if(u.__=l,u.__b=l.__b+1,null===(p=k[v])||p&&u.key==p.key&&u.type===p.type)k[v]=void 0;else for(h=0;h<_;h++){if((p=k[h])&&u.key==p.key&&u.type===p.type){k[h]=void 0;break}p=null}if(d=z(n,u,p=p||f,i,t,o,r,c,s),(h=u.ref)&&p.ref!=h&&(g||(g=[]),p.ref&&g.push(p.ref,null,u),g.push(h,u.__c||d,u)),null!=d){var e;if(null==w&&(w=d),void 0!==u.__d)e=u.__d,u.__d=void 0;else if(o==p||d!=c||null==d.parentNode){n:if(null==c||c.parentNode!==n)n.appendChild(d),e=null;else{for(y=c,h=0;(y=y.nextSibling)&&h<_;h+=2)if(y==d)break n;n.insertBefore(d,c),e=c}\"option\"==l.type&&(n.value=\"\")}c=void 0!==e?e:d.nextSibling,\"function\"==typeof l.type&&(l.__d=c)}else c&&p.__e==c&&c.parentNode!=n&&(c=m(p))}return v++,u}),l.__e=w,null!=o&&\"function\"!=typeof l.type)for(v=o.length;v--;)null!=o[v]&&a(o[v]);for(v=_;v--;)null!=k[v]&&j(k[v],k[v]);if(g)for(v=0;v<g.length;v++)$(g[v],g[++v],g[++v])}function b(n,l,u){if(null==u&&(u=[]),null==n||\"boolean\"==typeof n)l&&u.push(l(null));else if(Array.isArray(n))for(var i=0;i<n.length;i++)b(n[i],l,u);else u.push(l?l(\"string\"==typeof n||\"number\"==typeof n?h(null,n,null,null):null!=n.__e||null!=n.__c?h(n.type,n.props,n.key,null):n):n);return u}function x(n,l,u,i,t){var o;for(o in u)o in l||C(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"value\"===o||\"checked\"===o||u[o]===l[o]||C(n,o,l[o],u[o],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===c.test(l)?u+\"px\":null==u?\"\":u}function C(n,l,u,i,t){var o,r,f,e,c;if(t?\"className\"===l&&(l=\"class\"):\"class\"===l&&(l=\"className\"),\"key\"===l||\"children\"===l);else if(\"style\"===l)if(o=n.style,\"string\"==typeof u)o.cssText=u;else{if(\"string\"==typeof i&&(o.cssText=\"\",i=null),i)for(r in i)u&&r in u||P(o,r,\"\");if(u)for(f in u)i&&u[f]===i[f]||P(o,f,u[f])}else\"o\"===l[0]&&\"n\"===l[1]?(e=l!==(l=l.replace(/Capture$/,\"\")),c=l.toLowerCase(),l=(c in n?c:l).slice(2),u?(i||n.addEventListener(l,N,e),(n.l||(n.l={}))[l]=u):n.removeEventListener(l,N,e)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function N(l){this.l[l.type](n.event?n.event(l):l)}function z(l,u,i,t,o,r,f,e,c){var a,v,h,p,m,w,g,k,b,x,P=u.type;if(void 0!==u.constructor)return null;(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(k=u.props,b=(a=P.contextType)&&t[a.__c],x=a?b?b.props.value:a.__:t,i.__c?g=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(k,x):(u.__c=v=new y(k,x),v.constructor=P,v.render=D),b&&b.sub(v),v.props=k,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(k,v.__s))),p=v.props,m=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&k!==p&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(k,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(k,v.__s,x)){for(v.props=k,v.state=v.__s,v.__d=!1,v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),a=0;a<u.__k.length;a++)u.__k[a]&&(u.__k[a].__=u);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(k,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(p,m,w)})}v.context=x,v.props=k,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),u.__k=null!=a&&a.type==d&&null==a.key?a.props.children:Array.isArray(a)?a:[a],null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(w=v.getSnapshotBeforeUpdate(p,m)),_(l,u,i,t,o,r,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),g&&(v.__E=v.__=null),v.__e=!1}else u.__e=T(i.__e,u,i,t,o,r,f,c);(a=n.diffed)&&a(u)}catch(l){n.__e(l,u,i)}return u.__e}function A(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function T(n,l,u,i,t,o,r,c){var s,a,v,h,p,d=u.props,y=l.props;if(t=\"svg\"===l.type||t,null!=o)for(s=0;s<o.length;s++)if(null!=(a=o[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,o[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(y);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,y.is&&{is:y.is}),o=null}if(null===l.type)d!==y&&n.data!=y&&(n.data=y);else if(l!==u){if(null!=o&&(o=e.slice.call(n.childNodes)),v=(d=u.props||f).dangerouslySetInnerHTML,h=y.dangerouslySetInnerHTML,!c){if(d===f)for(d={},p=0;p<n.attributes.length;p++)d[n.attributes[p].name]=n.attributes[p].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}x(n,y,d,t,c),l.__k=l.props.children,h||_(n,l,u,i,\"foreignObject\"!==l.type&&t,o,r,f,c),c||(\"value\"in y&&void 0!==y.value&&y.value!==n.value&&(n.value=null==y.value?\"\":y.value),\"checked\"in y&&void 0!==y.checked&&y.checked!==n.checked&&(n.checked=y.checked))}return n}function $(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function j(l,u,i){var t,o,r;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||$(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(o=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(r=0;r<t.length;r++)t[r]&&j(t[r],u,i);null!=o&&a(o)}function D(n,l,u){return this.constructor(n,u)}function E(l,u,i){var t,r,c;n.__&&n.__(l,u),r=(t=i===o)?null:i&&i.__k||u.__k,l=v(d,null,[l]),c=[],z(u,(t?u:i||u).__k=l,r||f,f,void 0!==u.ownerSVGElement,i&&!t?[i]:r?null:e.slice.call(u.childNodes),c,i||f,t),A(c,l)}function H(n,l){E(n,l,o)}function I(n,l){return l=s(s({},n.props),l),arguments.length>2&&(l.children=e.slice.call(arguments,2)),h(n.type,l,l.key||n.key,l.ref||n.ref)}function L(n){var l={},u={__c:\"__cC\"+r++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var i,t=this;return this.getChildContext||(i=[],this.getChildContext=function(){return l[u.__c]=t,l},this.shouldComponentUpdate=function(l){n.value!==l.value&&i.some(function(n){n.context=l.value,g(n)})},this.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return g(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},y.prototype.setState=function(n,l){var u;u=this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(u,this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),g(this))},y.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),g(this))},y.prototype.render=d,u=[],i=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,o=f,r=0;export{E as render,H as hydrate,v as createElement,v as h,d as Fragment,p as createRef,l as isValidElement,y as Component,I as cloneElement,L as createContext,b as toChildArray,j as _unmount,n as options};\n//# sourceMappingURL=preact.module.js.map\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","import{h as r,Component as o,render as t}from\"preact\";export{h,render,Component}from\"preact\";import e from\"htm\";var m=e.bind(r);export{m as html};\n","import { html, Component } from \"htm/preact\";\n\nexport class If extends Component {\n  render({ condition, children }) {\n    if (!(children instanceof Array)) {\n      children = [children];\n    }\n    if (condition) {\n      return children.filter(c => c.type !== Else); \n    }\n    return children.filter(c => c.type === Else); \n  }\n}\n\nexport class Else extends Component {\n  render({ children }) {\n    return children;\n  }\n}","const REACTIONS = {\n  raise: '✋',\n  yes: '👍',\n  no: '👎',\n  speaker: '🔈',\n  problem: '⚠️'\n}\n\nexport default REACTIONS;","import { html, Component } from \"htm/preact\";\nimport { createRef } from \"preact\";\nimport { If, Else } from './If';\nimport REACTIONS from './reactions';\n\nconst reactions = Object.entries(REACTIONS);\n\nfunction pack (a, b, c, d, n, s) {\n  let r1 = a/b;\n  let closest = 0;\n  let minWaste = Infinity;\n  for (let rowsize = 1; rowsize <= n; rowsize++) {\n    let cols = Math.ceil(n / rowsize);\n    let width = rowsize * (c + s) + s;\n    let height = cols * (d + s) + s;\n    let r3 = width / height;\n    let waste = Math.abs(r3 - r1);\n    if (waste < minWaste) {\n      closest = rowsize;\n      minWaste = waste;\n    }\n  }\n  return closest;\n}\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    let inviteURL = new URL(window.location);\n    inviteURL.pathname = '/r/' + this.props.room;\n    this.state = {\n      status: null,\n      connected: false,\n      editing: false,\n      name: props.name || null,\n      participants: [],\n      size: 0,\n      inviteURL: inviteURL,\n      height: window.innerHeight + 'px'\n    };\n    this.safety = 0;\n    this.input = createRef();\n    this.holder = createRef();\n    this.props.socket.on('close', e => this.setState({ connected: false }));\n    this.props.socket.on('open', e => {\n      this.setState({ connected: true })\n      this.props.socket.send({\n        type: 'join',\n        room: this.props.room\n      });\n      this.props.socket.send({\n        type: 'update',\n        data: {\n          name: this.state.name,\n          status: this.state.status\n        }\n      });\n    });\n    this.props.socket.on('message', e => this.handleMessage(e));\n    window.addEventListener('resize', e => {\n      this.setState({ height: window.innerHeight + 'px' });\n      this.getSize()\n    });\n  }\n  handleMessage(msg) {\n    try {\n      msg = JSON.parse(msg);\n    } catch (e) {\n      console.warn(e);\n      return;\n    }\n    if (msg.type === 'update') {\n      this.setState({ participants: msg.data });\n    }\n  }\n  setStatus(status) {\n    this.setState({ status });\n    this.props.socket.send({\n      type: 'update',\n      data: { status }\n    });\n  }\n  clearStatus() {\n    this.setState({ status: null });\n    this.props.socket.send({\n      type: 'update',\n      data: { status: null }\n    });\n  }\n  changeName(name) {\n    this.setState({ name, editing: false });\n    this.props.socket.send({\n      type: 'update',\n      data: { name }\n    });\n  }\n  copyInvite(e) {\n    e.preventDefault();\n    if (this.invite.current) {\n      this.invite.current.select();      \n      document.execCommand(\"copy\");\n      console.log('copied invite link');\n    }\n  }\n  getSize() {\n    if (this.safety < 100000 && this.holder.current) {\n      let boxWidth = this.holder.current.offsetWidth;\n      let boxHeight = this.holder.current.offsetHeight;\n      let count = this.state.participants.filter(p=>p.status).length;\n      if (count && boxHeight) {\n        let cols = pack(boxWidth, boxHeight, 4, 3, count, 1);\n        let rows = Math.ceil(count / cols);\n        let size = Math.min(boxWidth / cols / 9, boxHeight / rows / 7);\n        if (size !== this.state.size) {\n          this.safety++;\n          this.setState({\n            size: size,\n          });\n        }\n      }\n    }\n  }\n  componentDidUpdate() {\n    this.getSize();\n    if (this.input.current && this.state.editing) {\n      this.input.current.select();\n    }\n  }\n  componentDidMount() {\n    this.getSize();\n    if (this.input.current && this.state.editing) {\n      this.input.current.select();\n    }\n  }\n  render({ room }, { participants=[], connected, size, inviteURL, height=\"100%\", name, editing }) {\n    return html`\n      <div class=\"app host\" style=\"height:${height}\">\n        <header>\n          <div class=\"room\">\n            <div><b>${name}</b> in #<b>${room}</b></div>\n            <button class=\"link\"\n                    onClick=${e => this.setState({ name, editing: true })}>\n              ${name ? \"change name\" : \"set your name\"}\n            </button>\n          </div>\n          <${If} condition=${connected}>\n            <div class=\"connection connected\">\n              <span>✅ connected</span>\n            </div>\n            <${Else}>\n              <div class=\"connection connecting\">\n                🔌 connecting\n              </div>\n            </>\n          </>\n        </header>\n        <div class=\"stats\">\n          <div class=\"count\">\n            🗣×${participants.length}\n            \n          </div>\n          ${reactions.map(([name, icon]) => html`\n            <div>${icon}×${participants.filter(p=>p.status===name).length}</div>\n          `)}\n        </div>\n        <div class=\"participants\" ref=${this.holder}>\n          <div class=\"layout\" style=\"font-size:${size}px\">\n            ${participants.filter(p => p.status).map(p => html`\n              <div class=\"participant\">\n                <div class=\"participant-status\">${p.status ? REACTIONS[p.status] : ''}</div>\n                <div class=\"participant-name\">${p.name}</div>\n              </div>\n            `)}\n          </div>\n        </div>\n        <div class=\"reactions\">\n          ${reactions.map(([name, icon]) => html`\n            <button class=\"${status === name ? 'current' : ''}\"\n                    onClick=${e => this.setStatus(name)}>\n              ${icon}\n            </button>\n          `)}\n          <button class=\"clear\"\n                  onClick=${e => this.clearStatus()}>\n            clear\n          </button>\n        </div>\n        <${If} condition=${editing}>\n          <div class=\"dialog\">\n            <h3>set your name</h3>\n            <input class=\"edit-name\"\n                   type=\"text\"\n                   ref=${this.input}\n                   value=${name}\n                   placeholder=\"enter name\"\n                   onKeyPress=${e => e.key === \"Enter\" && this.changeName(e.target.value)}\n                   onBlur=${e => this.changeName(e.target.value)} />\n          </div>\n        </>\n      </div>\n    `;\n  }\n}\n","import { render, html } from \"htm/preact\";\nimport FriendlyWebSocket from \"./websocket\";\nimport App from './App';\n\nlet room = (window.location.pathname.split('/').pop()).toLowerCase();\n\nlet name = null;\nif (window.location.search) {\n  let params = new URLSearchParams(window.location.search);\n  name = params.get('name');\n}\nlet socket = new FriendlyWebSocket();\n\nrender(html`<${App} socket=${socket} room=${room} name=${name}/>`, document.body);\n","/* A Friendly WebSocket */\n\n// WebSockets are awesome, but they have a nasty habit of disconnecting\n// and not waking back up. This class is a wrapper around WebSocket that\n// handles automatic reconnection.\n\nexport default class FriendlyWebSocket {\n  // optional customization of the websocket path\n  constructor({ path = \"/\", url } = {}) {\n    this.path = path;\n    this.url = url;\n    this.connect();\n    this.connected = false;\n    this.ping = null;\n    this._listeners = {\n      message: new Set(),\n      open: new Set(),\n      close: new Set()\n    };\n  }\n\n  connect() {\n    let protocol = 'ws://';\n    if (location.protocol === 'https:') {\n      protocol = 'wss://';\n    }\n    \n    let url = this.url || (protocol + location.host + this.path);\n    \n    this.socket = new WebSocket(url);\n\n    // Connection opened\n    this.socket.addEventListener(\"open\", event => {\n      this.connected = true;\n      this._emit('open');\n    });\n\n    this.socket.addEventListener(\"close\", event => {\n      this.connected = false;\n      // the server went away, try re-connecting in 2 seconds.\n      this._emit('close');\n      setTimeout(() => this.connect(), 2000);\n    });\n\n    // Listen for messages\n    this.socket.addEventListener(\"message\", event => {\n      // tell the listeners about it\n      this._emit('message', event.data);\n    });\n    \n    clearInterval(this.ping);\n    this.ping = setInterval(() => this.send('ping'), 5000);\n  }\n\n  _emit(type, data) {\n    this._listeners[type].forEach(handler => {\n      // don't let one listener spoil the batch\n      try {\n        handler(data);\n      } catch (e) {\n        console.warn(\"error in message handler\", e);\n      }\n    });\n  }\n  \n  on(type, handler) {\n    if (type in this._listeners) {\n      this._listeners[type].add(handler);\n    }\n  }\n\n  off(type, handler) {\n    if (type === \"message\") {\n      this.messageHandlers.delete(handler);\n    }\n  }\n\n  send(message) {\n    if (this.connected) {\n      if (typeof message === 'object') {\n        this.socket.send(JSON.stringify(message));\n      } else {\n        this.socket.send(message);\n      }\n    }\n  }\n}\n"],"names":["n","u","i","t","o","f","e","c","s","l","a","parentNode","removeChild","v","arguments","length","push","children","defaultProps","h","key","ref","type","props","__k","__","__b","__e","__d","__c","constructor","vnode","d","y","this","context","m","indexOf","w","base","g","debounceRendering","k","r","sort","__v","pop","__P","z","__n","ownerSVGElement","A","_","p","b","appendChild","nextSibling","insertBefore","value","j","$","Array","isArray","P","setProperty","test","C","style","cssText","replace","toLowerCase","slice","addEventListener","N","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","event","x","contextType","__E","prototype","render","D","sub","state","__h","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","__r","getChildContext","getSnapshotBeforeUpdate","T","diffed","some","call","nodeType","localName","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","name","__html","innerHTML","checked","current","unmount","componentWillUnmount","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","bind","resolve","setTimeout","Object","assign","apply","Map","get","set","If","Component","[object Object]","condition","filter","Else","REACTIONS","raise","yes","no","speaker","problem","reactions","entries","room","window","location","pathname","split","search","URLSearchParams","socket","path","url","connect","connected","ping","_listeners","message","Set","open","close","protocol","host","WebSocket","_emit","clearInterval","setInterval","send","forEach","handler","console","warn","add","messageHandlers","delete","JSON","stringify","html","super","inviteURL","URL","status","editing","participants","size","height","innerHeight","safety","input","holder","on","handleMessage","getSize","msg","parse","preventDefault","invite","select","execCommand","log","boxWidth","offsetWidth","boxHeight","offsetHeight","count","cols","r1","closest","minWaste","Infinity","rowsize","r3","Math","ceil","waste","abs","pack","rows","min","map","icon","setStatus","clearStatus","changeName","target","body"],"mappings":"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"}