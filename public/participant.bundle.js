!function(){"use strict";var e,t,n,o,s,i={},r=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function _(e,t,n){var o,s=arguments,i={};for(o in t)"key"!==o&&"ref"!==o&&(i[o]=t[o]);if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(s[o]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===i[o]&&(i[o]=e.defaultProps[o]);return a(e,i,t&&t.key,t&&t.ref)}function a(t,n,o,s){var i={type:t,props:n,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return e.vnode&&e.vnode(i),i}function p(e){return e.children}function d(e,t){this.props=e,this.context=t}function h(e,t){if(null==t)return e.__?h(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?h(e):null}function f(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return f(e)}}function v(s){(!s.__d&&(s.__d=!0)&&1===t.push(s)||o!==e.debounceRendering)&&((o=e.debounceRendering)||n)(m)}function m(){var e,n,o,s,i,r,l;for(t.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=t.pop();)e.__d&&(o=void 0,s=void 0,r=(i=(n=e).__v).__e,(l=n.__P)&&(o=[],s=S(l,i,c({},i),n.__n,void 0!==l.ownerSVGElement,null,o,null==r?h(i):r),$(o,i),s!=r&&f(i)))}function y(e,t,n,o,s,l,c,_,a){var p,d,f,v,m,y,k,b=n&&n.__k||r,w=b.length;if(_==i&&(_=null!=l?l[0]:w?h(n,0):null),p=0,t.__k=g(t.__k,(function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(f=b[p])||f&&n.key==f.key&&n.type===f.type)b[p]=void 0;else for(d=0;d<w;d++){if((f=b[d])&&n.key==f.key&&n.type===f.type){b[d]=void 0;break}f=null}if(v=S(e,n,f=f||i,o,s,l,c,_,a),(d=n.ref)&&f.ref!=d&&(k||(k=[]),f.ref&&k.push(f.ref,null,n),k.push(d,n.__c||v,n)),null!=v){var r;if(null==y&&(y=v),void 0!==n.__d)r=n.__d,n.__d=void 0;else if(l==f||v!=_||null==v.parentNode){e:if(null==_||_.parentNode!==e)e.appendChild(v),r=null;else{for(m=_,d=0;(m=m.nextSibling)&&d<w;d+=2)if(m==v)break e;e.insertBefore(v,_),r=_}"option"==t.type&&(e.value="")}_=void 0!==r?r:v.nextSibling,"function"==typeof t.type&&(t.__d=_)}else _&&f.__e==_&&_.parentNode!=e&&(_=h(f))}return p++,n})),t.__e=y,null!=l&&"function"!=typeof t.type)for(p=l.length;p--;)null!=l[p]&&u(l[p]);for(p=w;p--;)null!=b[p]&&C(b[p],b[p]);if(k)for(p=0;p<k.length;p++)N(k[p],k[++p],k[++p])}function g(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var o=0;o<e.length;o++)g(e[o],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?a(null,e,null,null):null!=e.__e||null!=e.__c?a(e.type,e.props,e.key,null):e):e);return n}function k(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===l.test(t)?n+"px":null==n?"":n}function b(e,t,n,o,s){var i,r,l,c,u;if(s?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof o&&(i.cssText="",o=null),o)for(r in o)n&&r in n||k(i,r,"");if(n)for(l in n)o&&n[l]===o[l]||k(i,l,n[l])}else"o"===t[0]&&"n"===t[1]?(c=t!==(t=t.replace(/Capture$/,"")),u=t.toLowerCase(),t=(u in e?u:t).slice(2),n?(o||e.addEventListener(t,w,c),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,w,c)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!s&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function w(t){this.l[t.type](e.event?e.event(t):t)}function S(t,n,o,s,i,r,l,u,_){var a,h,f,v,m,g,k,b,w,S,$=n.type;if(void 0!==n.constructor)return null;(a=e.__b)&&a(n);try{e:if("function"==typeof $){if(b=n.props,w=(a=$.contextType)&&s[a.__c],S=a?w?w.props.value:a.__:s,o.__c?k=(h=n.__c=o.__c).__=h.__E:("prototype"in $&&$.prototype.render?n.__c=h=new $(b,S):(n.__c=h=new d(b,S),h.constructor=$,h.render=P),w&&w.sub(h),h.props=b,h.state||(h.state={}),h.context=S,h.__n=s,f=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=$.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=c({},h.__s)),c(h.__s,$.getDerivedStateFromProps(b,h.__s))),v=h.props,m=h.state,f)null==$.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==$.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,S),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,S)){for(h.props=b,h.state=h.__s,h.__d=!1,h.__v=n,n.__e=o.__e,n.__k=o.__k,h.__h.length&&l.push(h),a=0;a<n.__k.length;a++)n.__k[a]&&(n.__k[a].__=n);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,S),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(v,m,g)}))}h.context=S,h.props=b,h.state=h.__s,(a=e.__r)&&a(n),h.__d=!1,h.__v=n,h.__P=t,a=h.render(h.props,h.state,h.context),n.__k=null!=a&&a.type==p&&null==a.key?a.props.children:Array.isArray(a)?a:[a],null!=h.getChildContext&&(s=c(c({},s),h.getChildContext())),f||null==h.getSnapshotBeforeUpdate||(g=h.getSnapshotBeforeUpdate(v,m)),y(t,n,o,s,i,r,l,u,_),h.base=n.__e,h.__h.length&&l.push(h),k&&(h.__E=h.__=null),h.__e=!1}else n.__e=x(o.__e,n,o,s,i,r,l,_);(a=e.diffed)&&a(n)}catch(t){e.__e(t,n,o)}return n.__e}function $(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(e){e.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function x(e,t,n,o,s,l,c,u){var _,a,p,d,h,f=n.props,v=t.props;if(s="svg"===t.type||s,null!=l)for(_=0;_<l.length;_++)if(null!=(a=l[_])&&((null===t.type?3===a.nodeType:a.localName===t.type)||e==a)){e=a,l[_]=null;break}if(null==e){if(null===t.type)return document.createTextNode(v);e=s?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,v.is&&{is:v.is}),l=null}if(null===t.type)f!==v&&e.data!=v&&(e.data=v);else if(t!==n){if(null!=l&&(l=r.slice.call(e.childNodes)),p=(f=n.props||i).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!u){if(f===i)for(f={},h=0;h<e.attributes.length;h++)f[e.attributes[h].name]=e.attributes[h].value;(d||p)&&(d&&p&&d.__html==p.__html||(e.innerHTML=d&&d.__html||""))}(function(e,t,n,o,s){var i;for(i in n)i in t||b(e,i,null,n[i],o);for(i in t)s&&"function"!=typeof t[i]||"value"===i||"checked"===i||n[i]===t[i]||b(e,i,t[i],n[i],o)})(e,v,f,s,u),t.__k=t.props.children,d||y(e,t,n,o,"foreignObject"!==t.type&&s,l,c,i,u),u||("value"in v&&void 0!==v.value&&v.value!==e.value&&(e.value=null==v.value?"":v.value),"checked"in v&&void 0!==v.checked&&v.checked!==e.checked&&(e.checked=v.checked))}return e}function N(t,n,o){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,o)}}function C(t,n,o){var s,i,r;if(e.unmount&&e.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||N(s,null,n)),o||"function"==typeof t.type||(o=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(s=t.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(t){e.__e(t,n)}s.base=s.__P=null}if(s=t.__k)for(r=0;r<s.length;r++)s[r]&&C(s[r],n,o);null!=i&&u(i)}function P(e,t,n){return this.constructor(e,n)}e={__e:function(e,t){for(var n,o;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(e)),o)return v(n.__E=n)}catch(t){e=t}throw e}},d.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),v(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},d.prototype.render=p,t=[],n="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=i;var E=function(e,t,n,o){var s;t[0]=0;for(var i=1;i<t.length;i++){var r=t[i++],l=t[i]?(t[0]|=r?1:2,n[t[i++]]):t[++i];3===r?o[0]=l:4===r?o[1]=Object.assign(o[1]||{},l):5===r?(o[1]=o[1]||{})[t[++i]]=l:6===r?o[1][t[++i]]+=l+"":r?(s=e.apply(l,E(e,l,n,["",null])),o.push(s),l[0]?t[0]|=2:(t[i-2]=0,t[i]=s)):o.push(l)}return o},L=new Map;var D=function(e){var t=L.get(this);return t||(t=new Map,L.set(this,t)),(t=E(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,o=1,s="",i="",r=[0],l=function(e){1===o&&(e||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,e,s):3===o&&(e||s)?(r.push(3,e,s),o=2):2===o&&"..."===s&&e?r.push(4,e,0):2===o&&s&&!e?r.push(5,0,!0,s):o>=5&&((s||!e&&5===o)&&(r.push(o,0,s,n),o=6),e&&(r.push(o,e,0,n),o=6)),s=""},c=0;c<e.length;c++){c&&(1===o&&l(),l(c));for(var u=0;u<e[c].length;u++)t=e[c][u],1===o?"<"===t?(l(),r=[r],o=3):s+=t:4===o?"--"===s&&">"===t?(o=1,s=""):s=t+s[0]:i?t===i?i="":s+=t:'"'===t||"'"===t?i=t:">"===t?(l(),o=1):o&&("="===t?(o=5,n=s,s=""):"/"===t&&(o<5||">"===e[c][u+1])?(l(),3===o&&(r=r[0]),o=r,(r=r[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),o=2):s+=t),3===o&&"!--"===s&&(o=4,r=r[0])}return l(),r}(e)),t),arguments,[])).length>1?t:t[0]}.bind(_);class U extends d{render({condition:e,children:t}){return t instanceof Array||(t=[t]),e?t.filter(e=>e.type!==M):t.filter(e=>e.type===M)}}class M extends d{render({children:e}){return e}}const T={raise:"✋",yes:"👍",no:"👎",speaker:"🔈",problem:"⚠️"},A=Object.entries(T);let W=window.location.pathname.split("/").pop().toLowerCase(),F=null;if(window.location.search){F=new URLSearchParams(window.location.search).get("name")}let O=new class{constructor({path:e="/",url:t}={}){this.path=e,this.url=t,this.connect(),this.connected=!1,this.ping=null,this._listeners={message:new Set,open:new Set,close:new Set}}connect(){let e="ws://";"https:"===location.protocol&&(e="wss://");let t=this.url||e+location.host+this.path;this.socket=new WebSocket(t),this.socket.addEventListener("open",e=>{this.connected=!0,this._emit("open")}),this.socket.addEventListener("close",e=>{this.connected=!1,this._emit("close"),setTimeout(()=>this.connect(),2e3)}),this.socket.addEventListener("message",e=>{this._emit("message",e.data)}),clearInterval(this.ping),this.ping=setInterval(()=>this.send("ping"),5e3)}_emit(e,t){this._listeners[e].forEach(e=>{try{e(t)}catch(e){console.warn("error in message handler",e)}})}on(e,t){e in this._listeners&&this._listeners[e].add(t)}off(e,t){"message"===e&&this.messageHandlers.delete(t)}send(e){this.connected&&("object"==typeof e?this.socket.send(JSON.stringify(e)):this.socket.send(e))}};!function(t,n,o){var l,c,u;e.__&&e.__(t,n),c=(l=o===s)?null:o&&o.__k||n.__k,t=_(p,null,[t]),u=[],S(n,(l?n:o||n).__k=t,c||i,i,void 0!==n.ownerSVGElement,o&&!l?[o]:c?null:r.slice.call(n.childNodes),u,o||i,l),$(u,t)}(D`<${class extends d{constructor(e){super(e),this.state={status:null,name:e.name||null,connected:!1,editing:!1},this.input={},this.props.socket.on("open",e=>{this.setState({connected:!0}),this.props.socket.send({type:"join",room:this.props.room}),this.props.socket.send({type:"update",data:{name:this.state.name,status:this.state.status}})}),this.props.socket.on("close",e=>this.setState({connected:!1})),this.props.socket.on("message",e=>this.handleMessage(e))}setStatus(e){this.setState({status:e}),this.props.socket.send({type:"update",data:{status:e}})}clearStatus(){this.setState({status:null}),this.props.socket.send({type:"update",data:{status:null}})}changeName(e){this.setState({name:e,editing:!1}),this.props.socket.send({type:"update",data:{name:e}})}handleMessage(e){let t=e.data;try{t=JSON.parse(t)}catch(e){return void console.warn(e)}"clear"===t.type&&this.clearStatus()}componentDidUpdate(){this.input.current&&this.state.editing&&this.input.current.select()}componentDidMount(){this.input.current&&this.state.editing&&this.input.current.select()}render({room:e},{status:t,name:n,connected:o,editing:s}){let i=new URL(window.location);return i.pathname="/r/"+e,console.log(i),D`
      <div class="app">
        <header>
          <div class="room">
            <div>#<b>${e}</b></div>
          </div>
          <${U} condition=${o}>
            <div class="connection connected">✅ connected</span>
            <${M}>
              <div class="connection connecting">🔌 connecting</span>
            </>
          </>
        </header>
        <div class="current">
          <${U} condition=${t}>
            <span>${T[t]}</span>
          </>
        </div>
        <div class="name" onClick=${e=>this.setState({editing:!0})}>
          <${U} condition=${s}>
            <input class="edit-name"
                   type="text"
                   ref=${this.input}
                   value=${n}
                   placeholder="enter name"
                   onKeyPress=${e=>"Enter"===e.key&&this.changeName(e.target.value)}
                   onBlur=${e=>this.changeName(e.target.value)} />
            <${M}>
              <${U} condition=${n}>
                  <span>${n}</span>
                <${M}>
                  <span>click to add your name</span>
                </>
              </>
            </>
          </>
        </div>
        <div class="reactions">
          <button class="clear"
                  onClick=${e=>this.clearStatus()}>
            clear
          </button>
          ${A.map(([e,t])=>D`
            <button onClick=${t=>this.setStatus(e)}>
              ${t}
            </button>
          `)}
        </div>
      </div>
    `}}} socket=${O} room=${W} name=${F}/>`,document.body)}();
//# sourceMappingURL=participant.bundle.js.map
